#!/bin/bash

# run matplotlib once to generate the font cache
python -c "import matplotlib as mpl; mpl.use('Agg'); import matplotlib.pyplot as plt; fig, ax = plt.subplots(); fig.savefig('test.png')"

test -e test.png && rm test.png

# install pot (must be installed here due to cython requirement)
python -m pip install -U pot

# create default ipython profile
ipython profile create
IPYTHON_KERNEL_CONFIG="/home/jovyan/.ipython/profile_default/ipython_kernel_config.py"

# add EnergyFlow specific config
cat $IPYTHON_KERNEL_CONFIG /home/jovyan/binder/ef_ipython_kernel_config.py > $IPYTHON_KERNEL_CONFIG
